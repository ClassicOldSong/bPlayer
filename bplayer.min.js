!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.bPlayer=e()}(this,function(){"use strict";var t='<div class="info_bplayer">\n\t<div class="titlewrap_bplayer">\n\t\t<span class="title_bplayer">Unknown Title</span>\n\t\t<span class="author_bplayer">Unknown Artist</span>\n\t</div>\n\t<div class="time_bplayer">\n\t\t<span class="current_bplayer">00:00</span>\n\t\t<span class="total_bplayer">00:00</span>\n\t</div>\n\t<div class="buttons_bplayer">\n\t\t<div class="disabled_bplayer btn_bplayer" id="loopBtn_bplayer">\n\t\t\t<i class="iconfont_bplayer">&#xe600;</i>\n\t\t</div>\n\t\t<div class="volume_bplayer">\n\t\t\t<div class="volumebtn_bplayer btn_bplayer" id="volumeBtn_bplayer">\n\t\t\t\t<i class="iconfont_bplayer">&#xe602;</i>\n\t\t\t</div>\n\t\t\t<div class="volumebar_bplayer">\n\t\t\t\t<div class="volumebg_bplayer"></div>\n\t\t\t\t<div class="volumeval_bplayer"></div>\n\t\t\t\t<div class="volumectl_bplayer"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div class="cover_bplayer">\n\t<div class="coverimg_bplayer"></div>\n\t<div class="controlbtn_bplayer playBtn_bplayer" id="playBtn_bplayer">\n\t\t<i class="iconfont_bplayer">&#xe601;</i>\n\t</div>\n\t<div class="controlbtn_bplayer hidden_bplayer" id="pauseBtn_bplayer">\n\t\t<i class="iconfont_bplayer">&#xe603;</i>\n\t</div>\n</div>\n<div class="progress_bplayer">\n\t<div class="loaded_bplayer"></div>\n\t<div class="played_bplayer"></div>\n\t<div class="progressctl_bplayer"></div>\n</div>\n',e=(console.info.bind(console,"[BP]"),console.warn.bind(console,"[BP]"));!function(t,e){if("undefined"==typeof document)return e;t=t||"";var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t)),n.appendChild(o)}("@font-face {\n\tfont-family: 'iconfont_bplayer';  /* project id 67267 */\n\tsrc: url('//at.alicdn.com/t/font_ksctw5cl4pjy8pvi.eot');\n\tsrc: url('//at.alicdn.com/t/font_ksctw5cl4pjy8pvi.eot?#iefix') format('embedded-opentype'),\n\turl('//at.alicdn.com/t/font_ksctw5cl4pjy8pvi.woff') format('woff'),\n\turl('//at.alicdn.com/t/font_ksctw5cl4pjy8pvi.ttf') format('truetype'),\n\turl('//at.alicdn.com/t/font_ksctw5cl4pjy8pvi.svg#iconfont') format('svg');\n}\n\nbplayer {\n\tdisplay: block;\n\t-webkit-touch-callout: none;\n\t-webkit-user-select: none;\n\t-khtml-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n}\n\n.iconfont_bplayer {\n\tfont-family:\"iconfont_bplayer\";\n\tfont-style:normal;\n\t-webkit-font-smoothing: antialiased;\n\t-webkit-text-stroke-width: 0.2px;\n}\n\n.bPlayer {\n\tbox-sizing: border-box;\n\tposition: relative;\n\toverflow: hidden;\n\tfont-family:\n\t\tHelvetica, Tahoma, Arial, \"Hiragino Sans GB\", \"Hiragino Sans GB W3\", \"Microsoft YaHei\", STXihei, STHeiti, Heiti, SimSun, sans-serif;\n\twidth: 100%;\n\theight: 60px;\n\tbackground-color: #FFF;\n\tcursor: default;\n\tbox-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n\tcolor: #000;\n}\n\n.cover_bplayer {\n\tbackground-color: #CCC;\n\theight: 60px;\n\twidth: 60px;\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n}\n.cover_bplayer:before {\n\tcontent: \"\\e605\";\n\tfont-family:\"iconfont_bplayer\";\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\theight: 100%;\n\twidth: 100%;\n\tline-height: 60px;\n\ttext-align: center;\n\tfont-size: 40px;\n\tcolor: #FFF;\n}\n\n.coverimg_bplayer {\n\tposition: absolute;\n\tbackground-size: cover;\n\theight: 100%;\n\twidth: 100%;\n}\n\n.controlbtn_bplayer {\n\tposition: absolute;\n\theight: 100%;\n\twidth: 100%;\n\tline-height: 60px;\n\ttext-align: center;\n\tfont-size: 40px;\n\tcolor: #FFF;\n\tbackground-color: rgba(0,0,0,0.27);\n\topacity: 0;\n\tdisplay: block;\n\ttransition: opacity 500ms;\n}\n.controlbtn_bplayer.playBtn_bplayer {\n\topacity: 0.8;\n}\n.controlbtn_bplayer:hover {\n\topacity: 1;\n}\n\n.info_bplayer {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\theight: 60px;\n\twidth: 100%;\n}\n\n.titlewrap_bplayer {\n\tpadding-left: 72px;\n\tpadding-right: 140px;\n\tline-height: 60px;\n\theight: 60px;\n\tfont-size: 20px;\n\twhite-space: nowrap;\n\ttext-align: left;\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n}\n\n.author_bplayer {\n\tfont-size: 80%;\n\topacity: 0.8;\n}\n.author_bplayer:before {\n\tcontent: \" - \";\n}\n\n.buttons_bplayer {\n\tposition: absolute;\n\ttop: 20px;\n\tfont-size: 16px;\n\tright: 0;\n}\n.btn_bplayer {\n\theight: 20px;\n\twidth: 20px;\n\tline-height: 20px;\n\ttext-align: center;\n\tmargin-right: 8px;\n\tfloat: right;\n\topacity: 1;\n\ttransition: opacity 500ms;\n}\n\n.progress_bplayer {\n\tposition: absolute;\n\tbottom: 0;\n\theight: 2px;\n\twidth: 100%;\n\ttransition: height 500ms;\n}\n.progress_bplayer:hover {\n\theight: 6px;\n}\n.loaded_bplayer {\n\tposition: absolute;\n\tleft: 0;\n\theight: 100%;\n\twidth: 0;\n\tbackground-color: #AAA;\n\ttransition: width 300ms linear;\n}\n.played_bplayer {\n\tposition: absolute;\n\tleft: 0;\n\theight: 100%;\n\twidth: 0;\n\tbackground-color: #A91212;\n\ttransition: width 100ms linear;\n}\n.progressctl_bplayer {\n\tposition: absolute;\n\tleft: 0;\n\theight: 100%;\n\twidth: 100%;\n}\n\n.time_bplayer {\n\tposition: absolute;\n\ttop: 20px;\n\tright: 65px;\n\tline-height: 20px;\n\tfont-size: 12px;\n}\n.total_bplayer:before {\n\tcontent: \" / \";\n}\n\n.volume_bplayer {\n\tposition: relative;\n\tline-height: 20px;\n\theight: 20px;\n\twidth: 20px;\n\tfloat: right;\n\tmargin-right: 8px;\n\toverflow: hidden;\n\tbox-shadow: 0 0 10px rgba(0, 0, 0, 0);\n\tbackground-color: #FFF;\n\ttransition: box-shadow 500ms, width 500ms;\n}\n.volume_bplayer:hover {\n\tbox-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n\twidth: 105px;\n}\n.volumebtn_bplayer {\n\tfloat: right;\n\tmargin: 0;\n}\n.volumebar_bplayer {\n\tposition: absolute;\n\ttop: 0;\n\tright: 20px;\n\theight: 20px;\n\twidth: 85px;\n}\n.volumebg_bplayer {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 80px;\n\tmargin: 8px 0 8px 5px;\n\theight: 4px;\n\tbackground-color: #AAA;\n}\n.volumeval_bplayer {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 80px;\n\tmargin: 8px 0 8px 5px;\n\theight: 4px;\n\tbackground-color: #A91212;\n}\n.volumectl_bplayer {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 80px;\n\tmargin-left: 5px;\n\theight: 20px;\n}\n\n\n.disabled_bplayer {\n\topacity: 0.2;\n}\n\n.hidden_bplayer {\n\topacity: 0;\n\tdisplay: none;\n}\n\n.narrow_bplayer .buttons_bplayer {\n\ttop: 35px;\n}\n.narrow_bplayer .time_bplayer {\n\ttop: 35px;\n}\n\n.narrow_bplayer .titlewrap_bplayer {\n\tpadding-right: 0;\n\tline-height: 40px;\n\tfont-size: 16px;\n}\n\n\n/* Section for bPayer_slim */\n.bPlayer.slim_bPlayer {\n\theight: 30px;\n}\n\n.slim_bPlayer .cover_bplayer {\n\theight: 30px;\n\twidth: 30px;\n}\n.slim_bPlayer .cover_bplayer:before {\n\tline-height: 30px;\n\tfont-size: 20px;\n}\n\n.slim_bPlayer .controlbtn_bplayer {\n\tline-height: 30px;\n\tfont-size: 20px;\n}\n\n.slim_bPlayer .info_bplayer {\n\theight: 30px;\n}\n\n.slim_bPlayer .titlewrap_bplayer {\n\tpadding-left: 38px;\n\tpadding-right: 140px;\n\tline-height: 30px;\n\theight: 30px;\n\tfont-size: 16px;\n}\n\n.slim_bPlayer .buttons_bplayer {\n\ttop: 0;\n\theight: 30px;\n}\n.slim_bPlayer .btn_bplayer {\n\theight: 30px;\n\tline-height: 30px;\n}\n\n.slim_bPlayer .time_bplayer {\n\ttop: 0;\n\theight: 30px;\n\tline-height: 30px;\n}\n\n.slim_bPlayer .volume_bplayer {\n\theight: 30px;\n\ttransition: width 500ms;\n}\n.slim_bPlayer .volume_bplayer:hover {\n\tbox-shadow: 0 0 10px rgba(0, 0, 0, 0);\n\twidth: 105px;\n}\n.slim_bPlayer .volumebar_bplayer {\n\theight: 30px;\n}\n.slim_bPlayer .volumebg_bplayer {\n\tmargin: 13px 0 13px 5px;\n}\n.slim_bPlayer .volumeval_bplayer {\n\tmargin: 13px 0 13px 5px;\n}\n.slim_bPlayer .volumectl_bplayer {\n\theight: 30px;\n}\n\n",void 0);var n={src:"",cover:"",title:"Unknown",artist:"Unknown",color:"#A91212",volume:1,muted:!1,autoplay:!1,loop:!1,slim:!1},o=function(){this.clientWidth<=460?this.classList.add("narrow_bplayer"):this.classList.remove("narrow_bplayer")},i=function(t){var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),o=Math.floor(t-3600*e-60*n),i="",r="",l="";return i=e+":",r=isNaN(n)?"00:":""+n,l=isNaN(o)?"00":""+o,e<10&&(i="0"+e+":"),n<10&&(r="0"+n+":"),o<10&&(l="0"+o),(isNaN(e)||e<=0)&&(i=""),""+i+r+l},r=function(){function r(l,a){var s=this;if(l instanceof Element||(l=document.querySelector(l)),l.bp instanceof r)return e("This element has already been attached!");Object.defineProperty(l,"bp",{value:this});var p=l.parentNode;Object.defineProperty(this,"_el",{value:document.createElement("bplayer")});for(var d=o.bind(this._el),u=0;u<l.attributes.length;u++)/(src|title|artist|slim|cover|color|autoplay|loop|controls)/i.test(l.attributes[u].name)||s._el.setAttribute(l.attributes[u].name,l.attributes[u].value);this._el.classList.add("bPlayer"),this._el.insertAdjacentHTML("afterbegin",t);var c={progressdown:!1,volumedown:!1},h={cover:this._el.querySelector(".coverimg_bplayer"),progressCtl:this._el.querySelector(".progressctl_bplayer"),volumeCtl:this._el.querySelector(".volumectl_bplayer"),title:this._el.querySelector(".title_bplayer"),artist:this._el.querySelector(".author_bplayer"),played:this._el.querySelector(".played_bplayer"),current:this._el.querySelector(".current_bplayer"),loaded:this._el.querySelector(".loaded_bplayer"),total:this._el.querySelector(".total_bplayer"),volumeVal:this._el.querySelector(".volumeval_bplayer"),playCtl:this._el.querySelector(".cover_bplayer"),volumeBtn:this._el.querySelector("#volumeBtn_bplayer"),loopBtn:this._el.querySelector("#loopBtn_bplayer"),playBtn:this._el.querySelector("#playBtn_bplayer"),pauseBtn:this._el.querySelector("#pauseBtn_bplayer")};"AUDIO"===l.tagName.toUpperCase()?(h.audio=l,l=document.createTextNode(""),p.insertBefore(l,h.audio)):h.audio=new Audio,h.audio.controls=!1,this._el.appendChild(h.audio),p.replaceChild(this._el,l),window.addEventListener("resize",d),d();var b=h.progressCtl,y=h.volumeCtl,v=h.played,f=h.current,m=h.loaded,_=h.total,g=h.volumeVal,x=h.volumeBtn,w=h.playCtl,L=h.loopBtn,k=h.playBtn,E=h.pauseBtn;if(b.addEventListener("click",function(t){var e=this.clientWidth,n=t.offsetX;n>=0&&n<=e&&(h.audio.currentTime=n/e*h.audio.duration)}),b.addEventListener("mousedown",function(){c.progressdown=!0}),b.addEventListener("mouseup",function(){c.progressdown=!1}),b.addEventListener("mouseout",function(){c.progressdown=!1}),b.addEventListener("mousemove",function(t){if(c.progressdown){var e=this.clientWidth,n=t.offsetX;n>=0&&n<=e&&(h.audio.currentTime=n/e*h.audio.duration)}}),b.addEventListener("touchstart",function(){c.progressdown=!0}),b.addEventListener("touchend",function(){c.progressdown=!1}),b.addEventListener("touchmove",function(t){if(c.progressdown){var e=this.clientWidth,n=t.touches[0].pageX-t.target.getBoundingClientRect().left;n>=0&&n<=e&&(h.audio.currentTime=n/e*h.audio.duration)}}),y.addEventListener("click",function(t){var e=t.offsetX;e>=0&&e<=80&&(h.audio.volume=e/80)}),y.addEventListener("mousedown",function(){c.volumedown=!0}),y.addEventListener("mouseup",function(){c.volumedown=!1}),y.addEventListener("mouseout",function(){c.volumedown=!1}),y.addEventListener("mousemove",function(t){if(c.volumedown){var e=t.offsetX;e>=0&&e<=80&&(h.audio.volume=e/80)}}),y.addEventListener("touchstart",function(){c.volumedown=!0}),y.addEventListener("touchend",function(){c.volumedown=!1}),y.addEventListener("touchmove",function(t){if(c.volumedown){var e=t.touches[0].pageX-t.target.getBoundingClientRect().left;e>=0&&e<=80&&(h.audio.volume=e/80)}}),x.addEventListener("click",function(){s._el.muted=!s._el.muted}),w.addEventListener("click",function(){h.audio.paused?s._el.play():s._el.pause()}),L.addEventListener("click",function(){s._el.loop=!s._el.loop}),h.audio.addEventListener("timeupdate",function(){v.style.width=this.currentTime/this.duration*100+"%",f.textContent=i(this.currentTime)}),h.audio.addEventListener("progress",function(){1===this.buffered.length&&(m.style.width=this.buffered.end(0)/this.duration*100+"%"),_.textContent=i(this.duration)}),h.audio.addEventListener("volumechange",function(){g.style.width=80*this.volume+"px"}),h.audio.addEventListener("play",function(){k.classList.add("hidden_bplayer"),E.classList.remove("hidden_bplayer"),_.textContent=i(this.duration)}),h.audio.addEventListener("pause",function(){k.classList.remove("hidden_bplayer"),E.classList.add("hidden_bplayer"),_.textContent=i(this.duration)}),h.audio.addEventListener("ended",function(){s.loop||s.pause()}),Object.defineProperties(this._el,{data:{get:function(){return{src:this.src,cover:this.cover,title:this.title,artist:this.artist,color:this.color,slim:this.slim,volume:this.volume,muted:this.muted}},set:function(t){var e=this;for(var o in n)null!==t[o]&&void 0!==t[o]&&(e[o]=t[o])}},slim:{get:function(){return this.className.split(" ").indexOf("slim_bPlayer")!==-1},set:function(t){t=!!t,t?this.classList.add("slim_bPlayer"):this.classList.remove("slim_bPlayer")}},src:{get:function(){return h.audio.src},set:function(t){h.audio.src=t}},cover:{get:function(){return h.cover.style.backgroundImage.split('")')[0].split('url("')[1]},set:function(t){h.cover.style.backgroundImage='url("'+t+'")'}},title:{get:function(){return h.title.textContent},set:function(t){h.title.textContent=t}},artist:{get:function(){return h.artist.textContent},set:function(t){h.artist.textContent=t}},color:{get:function(){return h.played.style.backgroundColor},set:function(t){h.played.style.backgroundColor=t,h.volumeVal.style.backgroundColor=t}},volume:{get:function(){return h.audio.volume},set:function(t){h.audio.volume=t}},muted:{get:function(){return h.audio.muted},set:function(t){t=!!t,h.audio.muted=t,t?h.volumeBtn.classList.add("disabled_bplayer"):h.volumeBtn.classList.remove("disabled_bplayer")}},loop:{get:function(){return h.audio.loop},set:function(t){t=!!t,h.audio.loop=t,t?h.loopBtn.classList.remove("disabled_bplayer"):h.loopBtn.classList.add("disabled_bplayer")}},autoplay:{get:function(){return h.audio.autoplay},set:function(t){t=!!t,h.audio.autoplay=t}},paused:{get:function(){return h.audio.paused}},addListener:{value:function(t,e){return h.audio.addEventListener(t,e,!1)}},removeListener:{value:function(t,e){return h.audio.removeEventListener(t,e,!1)}},play:{value:h.audio.play.bind(h.audio)},pause:{value:h.audio.pause.bind(h.audio)},bp:{value:this}}),a)for(var B in n)null!==a[B]&&void 0!==a[B]||(a[B]=n[B]);else a=Object.assign({},n);for(var P in n)s[P](a[P])}var l={paused:{},bp:{}},a={version:{}};return r.prototype.data=function(t){return void 0!==t?(this._el.data=t,this):this._el.data},r.prototype.slim=function(t){return void 0!==t?(this._el.slim=t,this):this._el.slim},r.prototype.src=function(t){return void 0!==t?(this._el.src=t,this):this._el.src},r.prototype.cover=function(t){return void 0!==t?(this._el.cover=t,this):this._el.cover},r.prototype.title=function(t){return void 0!==t?(this._el.title=t,this):this._el.title},r.prototype.artist=function(t){return void 0!==t?(this._el.artist=t,this):this._el.artist},r.prototype.color=function(t){return void 0!==t?(this._el.color=t,this):this._el.color},r.prototype.volume=function(t){return void 0!==t?(this._el.volume=t,this):this._el.volume},r.prototype.muted=function(t){return void 0!==t?(this._el.muted=t,this):this._el.muted},r.prototype.loop=function(t){return void 0!==t?(this._el.loop=t,this):this._el.loop},r.prototype.autoplay=function(t){return void 0!==t?(this._el.autoplay=t,this):this._el.autoplay},l.paused.get=function(){return this._el.paused},r.prototype.addListener=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return(n=this._el).addListener.apply(n,t),this;var n},r.prototype.removeListener=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return(n=this._el).removeListener.apply(n,t),this;var n},r.prototype.play=function(){return this._el.play(),this},r.prototype.pause=function(){return this._el.pause(),this},l.bp.get=function(){return this},r.scan=function(){for(var t=document.querySelectorAll('audio[controls="bplayer"]'),e=0;e<t.length;e++){var n={src:t[e].src,loop:t[e].loop,title:t[e].title,autoplay:t[e].autoplay,slim:JSON.parse(t[e].getAttribute("slim")),cover:t[e].getAttribute("cover"),color:t[e].getAttribute("color"),artist:t[e].getAttribute("artist")};new r(t[e],n)}},a.version.get=function(){return"1.0.2.master.6ff205e"},Object.defineProperties(r.prototype,l),Object.defineProperties(r,a),r}();return console.log("%c bPlayer %c v1.0.2.master.6ff205e \n%c See http://bplayer.js.org for detail. ","\nbackground-color: #A91212;\nfont-weight: bold;\ncolor: #FFF;\nfont-size: 20px;\n","\nbackground-color: #531212;\nfont-weight: bold;\ncolor: #FEDCBA;\nfont-size: 20px;\n","\nbackground-color: #000;\nfont-weight: bold;\ncolor: #FEDCBA;\nfont-size: 12px;\n"),r});
