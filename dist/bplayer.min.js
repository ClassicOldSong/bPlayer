"use strict";(function(){var a='<div class="info_bplayer"><div class="titlewrap_bplayer"><span class="title_bplayer">Unknown Title</span><span class="author_bplayer">Unknown Artist</span></div><div class="time_bplayer"><span class="current_bplayer">0:00</span><span class="total_bplayer">0:00</span></div><div class="buttons_bplayer"><div class="disabled_bplayer btn_bplayer" id="loopBtn_bplayer"><i class="iconfont_bplayer">&#xe600;</i></div><div class="volume_bplayer"><div class="volumebtn_bplayer btn_bplayer" id="volumeBtn_bplayer"><i class="iconfont_bplayer">&#xe602;</i></div><div class="volumebar_bplayer"><div class="volumebg_bplayer"></div><div class="volumeval_bplayer"></div><div class="volumectl_bplayer"></div></div></div></div></div><div class="cover_bplayer"><div class="coverimg_bplayer"></div><div class="controlbtn_bplayer playBtn_bplayer" id="playBtn_bplayer"><i class="iconfont_bplayer">&#xe601;</i></div><div class="controlbtn_bplayer hidden_bplayer" id="pauseBtn_bplayer"><i class="iconfont_bplayer">&#xe603;</i></div></div><div class="progress_bplayer"><div class="loaded_bplayer"></div><div class="played_bplayer"></div><div class="progressctl_bplayer"></div></div>';var g=function(i){var h=new Date(i*1000);var j=h.getSeconds();if(j<10){j="0"+j}return h.getMinutes()+":"+j};var c=function(j,h){var i=j.parentNode;i.replaceChild(h,j)};var f=function(){if(this.clientWidth<=460){this.classList.add("narrow_bplayer")}else{this.classList.remove("narrow_bplayer")}};var e=function(k,y){var o=this;if(k){var t={volumedown:false,progressdown:false,playing:false,slim:false,cover:""};var p=document.createElement("bplayer");p.className="bPlayer";p.innerHTML=a;var s=p.querySelector(".coverimg_bplayer");var q=p.querySelector(".progressctl_bplayer");var v=p.querySelector(".volumectl_bplayer");var z=p.querySelector(".title_bplayer");var h=p.querySelector(".author_bplayer");var l=p.querySelector(".played_bplayer");var n=p.querySelector(".current_bplayer");var r=p.querySelector(".loaded_bplayer");var B=p.querySelector(".total_bplayer");var u=p.querySelector(".volumeval_bplayer");var j=p.querySelector(".cover_bplayer");var m=p.querySelector("#volumeBtn_bplayer");var x=p.querySelector("#loopBtn_bplayer");var A=p.querySelector("#playBtn_bplayer");var i=p.querySelector("#pauseBtn_bplayer");this.element=p;if(typeof k==="string"){k=document.querySelector(k)}if(!(k&&(k.nodeType!==null))){throw new Error("Invalid element.")}if(k.tagName.toUpperCase()==="BPLAYER"){throw new Error("bPlayer already attached.")}var w;if(k.tagName.toUpperCase()==="AUDIO"){w=k}else{w=document.createElement("audio")}this.slim=function(C){if(C===true){p.classList.add("slim_bPlayer");t.slim=true;return o}else{if(C===false){p.classList.remove("slim_bPlayer");t.slim=false;return o}else{return t.slim}}};this.src=function(C){if(C||C===""){w.src=C;if(!w.autoplay){o.pause()}n.textContent="0:00";B.textContent="0:00";l.style.width=0;r.style.width=0;return o}else{return w.src}};this.cover=function(C){if(C||C===""){s.style.backgroundImage='url("'+C+'")';t.cover=C;return o}else{return t.cover}};this.title=function(C){if(C||C===""){z.textContent=C;return o}else{return z.textContent}};this.artist=function(C){if(C||C===""){h.textContent=C;return o}else{return h.textContent}};this.color=function(C){if(C||C===""){l.style.backgroundColor=C;u.style.backgroundColor=C;return o}else{return l.style.backgroundColor}};this.volume=function(C){if(C||C===""){w.volume=C;return o}else{return w.volume}};this.muted=function(C){if(C===false){w.muted=C;m.classList.remove("disabled_bplayer");return o}else{if(C===true){w.muted=C;m.classList.add("disabled_bplayer");return o}else{return w.muted}}};this.loop=function(C){if(C===false){w.loop=C;x.classList.add("disabled_bplayer");return o}else{if(C===true){w.loop=C;x.classList.remove("disabled_bplayer");return o}else{return w.loop}}};this.autoplay=function(C){if(C===false){w.autoplay=C;return o}else{if(C===true){w.autoplay=C;return o}else{return w.autoplay}}};this.play=function(){if(this.src()!==""&&this.src()!==null){w.play()}return o};this.pause=function(){w.pause();A.classList.remove("hidden_bplayer");i.classList.add("hidden_bplayer");t.playing=false;return o};this.init=function(){if(typeof(p.inited)==="undefined"){for(var C=0;C<k.attributes.length;C++){p.setAttribute(k.attributes[C].name,k.attributes[C].value)}c(k,p);f.call(p);p.inited=true}else{console.warn(p,"has already been initialized!")}return o};this.playing=function(){return t.playing};Object.defineProperties(p,{slim:{get:function(){return o.slim()},set:function(C){o.slim(C)}},src:{get:function(){return o.src()},set:function(C){o.src(C)}},cover:{get:function(){return o.cover()},set:function(C){o.cover(C)}},title:{get:function(){return o.title()},set:function(C){o.title(C)}},artist:{get:function(){return o.artist()},set:function(C){o.artist(C)}},color:{get:function(){return o.color()},set:function(C){o.color(C)}},volume:{get:function(){return w.volume},set:function(C){w.volume=C}},muted:{get:function(){return w.muted},set:function(C){w.muted=C}},loop:{get:function(){return w.loop},set:function(C){w.loop=C}},autoplay:{get:function(){return w.autoplay},set:function(C){w.autoplay=C}},playing:{get:function(){return t.playing}}});window.addEventListener("resize",function(){f.call(p)});q.addEventListener("click",function(F){var D=this.clientWidth;var C=F.offsetX;try{w.currentTime=C/D*w.duration}catch(E){}});q.addEventListener("mousedown",function(){t.progressdown=true});q.addEventListener("mouseup",function(){t.progressdown=false});q.addEventListener("mouseout",function(){t.progressdown=false});q.addEventListener("mousemove",function(F){if(t.progressdown){var D=this.clientWidth;var C=F.offsetX;try{w.currentTime=C/D*w.duration}catch(E){}}});q.addEventListener("touchstart",function(){t.progressdown=true});q.addEventListener("touchend",function(){t.progressdown=false});q.addEventListener("touchmove",function(F){if(t.progressdown){var D=this.clientWidth;var C=F.touches[0].pageX-F.target.getBoundingClientRect().left;try{w.currentTime=C/D*w.duration}catch(E){}}});v.addEventListener("click",function(D){var C=D.offsetX+1;if(C>=0){w.volume=C/80}});v.addEventListener("mousedown",function(){t.volumedown=true});v.addEventListener("mouseup",function(){t.volumedown=false});v.addEventListener("mouseout",function(){t.volumedown=false});v.addEventListener("mousemove",function(E){if(t.volumedown){var C=E.offsetX+1;try{w.volume=C/80}catch(D){}}});v.addEventListener("touchstart",function(){t.volumedown=true});v.addEventListener("touchend",function(){t.volumedown=false});v.addEventListener("touchmove",function(E){if(t.volumedown){var C=E.touches[0].pageX-E.target.getBoundingClientRect().left+1;try{w.volume=C/80}catch(D){}}});m.addEventListener("click",function(){if(o.muted()){o.muted(false)}else{o.muted(true)}});j.addEventListener("click",function(){if(t.playing){o.pause()}else{o.play()}});x.addEventListener("click",function(){if(o.loop()){o.loop(false)}else{o.loop(true)}});w.addEventListener("timeupdate",function(){l.style.width=this.currentTime/this.duration*100+"%";n.textContent=g(this.currentTime)});w.addEventListener("progress",function(){try{r.style.width=this.buffered.end(this.length-1)/this.duration*100+"%";B.textContent=g(this.duration)}catch(C){}});w.addEventListener("volumechange",function(){u.style.width=this.volume*80+"px"});w.addEventListener("play",function(){A.classList.add("hidden_bplayer");i.classList.remove("hidden_bplayer");B.textContent=g(this.duration);t.playing=true});w.addEventListener("ended",function(){if(!o.loop()){o.pause()}});return o}};var d=function(j){if(j){if(typeof(j.element)!=="undefined"){var k={src:"",cover:"",title:"",artist:"",color:"#F00",volume:"1",muted:false,autoplay:false,loop:false,slim:false};for(var h in j){k[h]=j[h]}this.attach(k.element).autoplay(k.autoplay).cover(k.cover).title(k.title).artist(k.artist).color(k.color).volume(k.volume).slim(k.slim).muted(k.muted).loop(k.loop).src(k.src).init();if(k.autoplay){this.play()}}else{throw new Error("[bPlayer] 'element' is not defined in configuration!")}}return('bPlayer - Ver 0.2.0a \n Please use "new" to create a bPlayer element.')};d.prototype.attach=e;window.bPlayer=d;var b=function(){document.removeEventListener("DOMContentLoaded",b,false);var q=document.querySelectorAll("audio");for(var n=0;n<q.length;n++){if(q[n].hasAttribute("controls")){var p="",l="",r="",k="#F00",h=false,j=false,o=false;if(q[n].hasAttribute("title")){p=q[n].getAttribute("title")}if(q[n].hasAttribute("artist")){l=q[n].getAttribute("artist")}if(q[n].hasAttribute("cover")){r=q[n].getAttribute("cover")}if(q[n].hasAttribute("color")){k=q[n].getAttribute("color")}if(q[n].hasAttribute("slim")){if(q[n].getAttribute("slim")!=="false"){h=true}}if(q[n].hasAttribute("autoplay")){if(q[n].getAttribute("autoplay")!=="false"){j=true}}if(q[n].hasAttribute("loop")){if(q[n].getAttribute("loop")!=="false"){o=true}}var m=new d();m.attach(q[n]).autoplay(j).loop(o).title(p).artist(l).cover(r).color(k).slim(h).init();if(j){m.play()}}}};document.addEventListener("DOMContentLoaded",b,false);if(document.readyState==="interactive"||document.readyState==="complete"){b()}})();