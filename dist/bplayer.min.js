"use strict";(function(){var c=function(){return('bPlayer - Ver 0.1.0 \n Please use "new" to create a bPlayer element.')};var d='<div class="info_bplayer"><div class="titlewrap_bplayer"><span class="title_bplayer">Unknown Title</span><span class="author_bplayer">Unknown Artist</span></div><div class="time_bplayer"><span class="current_bplayer">0:00</span><span class="total_bplayer">0:00</span></div><div class="buttons_bplayer"><div class="disabled_bplayer btn_bplayer" id="loopBtn_bplayer"><i class="iconfont_bplayer">&#xe600;</i></div><div class="volume_bplayer"><div class="volumebtn_bplayer btn_bplayer" id="volumeBtn_bplayer"><i class="iconfont_bplayer">&#xe602;</i></div><div class="volumebar_bplayer"><div class="volumebg_bplayer"></div><div class="volumeval_bplayer"></div><div class="volumectl_bplayer"></div></div></div></div></div><div class="cover_bplayer"><div class="coverimg_bplayer"></div><div class="controlbtn_bplayer playBtn_bplayer" id="playBtn_bplayer"><i class="iconfont_bplayer">&#xe601;</i></div><div class="controlbtn_bplayer hidden_bplayer" id="pauseBtn_bplayer"><i class="iconfont_bplayer">&#xe603;</i></div></div><div class="progress_bplayer"><div class="loaded_bplayer"></div><div class="played_bplayer"></div><div class="progressctl_bplayer"></div></div>';function e(j){var h=new Date(j*1000);var i=h.getSeconds();if(i<10){i="0"+i}return h.getMinutes()+":"+i}function a(i){var h=this.className.split(" ");if(h.indexOf(i)===-1){h.push(i)}this.className=h.join(" ");return this.className}function f(j){var h=this.className.split(" ");var i=h.indexOf(j);if(i>-1){h.splice(i,1)}this.className=h.join(" ");return this.className}function g(){if(this.clientWidth<=460){a.call(this,"narrow_bplayer")}else{f.call(this,"narrow_bplayer")}}function b(k){var h=this;if(k){var B=false;var t=false;var r=false;var i=document.createElement("div");i.className="bPlayer";i.innerHTML=d;var v=document.createElement("audio");var w=i.querySelector(".coverimg_bplayer");var s=i.querySelector(".progressctl_bplayer");var A=i.querySelector(".volumectl_bplayer");var x=i.querySelector(".title_bplayer");var u=i.querySelector(".author_bplayer");var q=i.querySelector(".played_bplayer");var j=i.querySelector(".current_bplayer");var l=i.querySelector(".loaded_bplayer");var y=i.querySelector(".total_bplayer");var C=i.querySelector(".volumeval_bplayer");var p=i.querySelector(".cover_bplayer");var z=i.querySelector("#volumeBtn_bplayer");var m=i.querySelector("#loopBtn_bplayer");var o=i.querySelector("#playBtn_bplayer");var n=i.querySelector("#pauseBtn_bplayer");this.element=k;if(typeof k==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&(this.element.nodeType!==null))){throw new Error("Invalid element.")}if(this.element.bPlayer){throw new Error("bPlayer already attached.")}this.element.bPlayer=true;this.src=function(D){if(D){v.src=D;if(!v.autoplay){h.pause()}j.textContent="0:00";y.textContent="0:00";q.style.width=0;l.style.width=0;return h}else{return v.src}};this.cover=function(D){if(D){w.style.backgroundImage='url("'+D+'")';return h}else{return w.style.backgroundImage}};this.title=function(D){if(D){x.textContent=D;return h}else{return x.textContent}};this.artist=function(D){if(D){u.textContent=D;return h}else{return u.textContent}};this.color=function(D){if(D){q.style.backgroundColor=D;C.style.backgroundColor=D;return h}else{return q.style.backgroundColor}};this.volume=function(D){if(D){v.volume=D;return h}else{return v.volume}};this.muted=function(D){if(D===false){v.muted=D;f.call(z,"disabled_bplayer");return h}else{if(D===true){v.muted=D;a.call(z,"disabled_bplayer");return h}else{return v.muted}}};this.loop=function(D){if(D===false){v.loop=D;a.call(m,"disabled_bplayer");return h}else{if(D===true){v.loop=D;f.call(m,"disabled_bplayer");return h}else{return v.loop}}};this.autoplay=function(D){if(D===false){v.autoplay=D;return h}else{if(D===true){v.autoplay=D;return h}else{return v.autoplay}}};this.play=function(){if(this.src()!==""&&this.src()!==null){v.play()}return h};this.pause=function(){v.pause();f.call(o,"hidden_bplayer");a.call(n,"hidden_bplayer");r=false;return h};this.init=function(){this.element.appendChild(i);g.call(i);this.element.onselectstart=function(){return false};return h};window.addEventListener("resize",function(){g.call(i)});s.onclick=function(D){var F=this.clientWidth;var G=D.offsetX;try{v.currentTime=G/F*v.duration}catch(E){}};s.onmousedown=function(){t=true};s.onmouseup=function(){t=false};s.onmouseout=function(){t=false};s.onmousemove=function(D){if(t){var F=this.clientWidth;var G=D.offsetX;try{v.currentTime=G/F*v.duration}catch(E){}}};A.onclick=function(D){var E=D.offsetX+1;if(E>=0){v.volume=E/80}};A.onmousedown=function(){B=true};A.onmouseup=function(){B=false};A.onmouseout=function(){B=false};A.onmousemove=function(D){if(B){var F=D.offsetX+1;try{v.volume=F/80}catch(E){}}};z.onclick=function(){if(h.muted()){h.muted(false)}else{h.muted(true)}};p.onclick=function(){if(r){h.pause()}else{h.play()}};m.onclick=function(){if(h.loop()){h.loop(false)}else{h.loop(true)}};v.ontimeupdate=function(){q.style.width=this.currentTime/this.duration*100+"%";j.textContent=e(this.currentTime)};v.onprogress=function(){try{l.style.width=this.buffered.end(this.length-1)/this.duration*100+"%";y.textContent=e(this.duration)}catch(D){}};v.onvolumechange=function(){C.style.width=this.volume*80+"px"};v.onplay=function(){a.call(o,"hidden_bplayer");f.call(n,"hidden_bplayer");y.textContent=e(this.duration);r=true};v.onended=function(){if(!h.loop()){h.pause()}};return h}}window.bPlayer=c;c.prototype.attach=b})();