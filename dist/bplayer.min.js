"use strict";(function(){var d=function(){return('bPlayer - Ver 0.2.0a \n Please use "new" to create a bPlayer element.')};var a='<div class="info_bplayer"><div class="titlewrap_bplayer"><span class="title_bplayer">Unknown Title</span><span class="author_bplayer">Unknown Artist</span></div><div class="time_bplayer"><span class="current_bplayer">0:00</span><span class="total_bplayer">0:00</span></div><div class="buttons_bplayer"><div class="disabled_bplayer btn_bplayer" id="loopBtn_bplayer"><i class="iconfont_bplayer">&#xe600;</i></div><div class="volume_bplayer"><div class="volumebtn_bplayer btn_bplayer" id="volumeBtn_bplayer"><i class="iconfont_bplayer">&#xe602;</i></div><div class="volumebar_bplayer"><div class="volumebg_bplayer"></div><div class="volumeval_bplayer"></div><div class="volumectl_bplayer"></div></div></div></div></div><div class="cover_bplayer"><div class="coverimg_bplayer"></div><div class="controlbtn_bplayer playBtn_bplayer" id="playBtn_bplayer"><i class="iconfont_bplayer">&#xe601;</i></div><div class="controlbtn_bplayer hidden_bplayer" id="pauseBtn_bplayer"><i class="iconfont_bplayer">&#xe603;</i></div></div><div class="progress_bplayer"><div class="loaded_bplayer"></div><div class="played_bplayer"></div><div class="progressctl_bplayer"></div></div>';var g=function(i){var h=new Date(i*1000);var j=h.getSeconds();if(j<10){j="0"+j}return h.getMinutes()+":"+j};var c=function(j,h){var i=j.parentNode;i.replaceChild(h,j)};var f=function(){if(this.clientWidth<=460){this.classList.add("narrow_bplayer")}else{this.classList.remove("narrow_bplayer")}};var e=function(k,y){var o=this;if(k){var t={volumedown:false,progressdown:false,playing:false,slim:false,cover:""};var p=document.createElement("div");p.className="bPlayer";p.innerHTML=a;var x;if(y){x=y}else{x=document.createElement("audio")}var s=p.querySelector(".coverimg_bplayer");var q=p.querySelector(".progressctl_bplayer");var v=p.querySelector(".volumectl_bplayer");var z=p.querySelector(".title_bplayer");var h=p.querySelector(".author_bplayer");var m=p.querySelector(".played_bplayer");var n=p.querySelector(".current_bplayer");var r=p.querySelector(".loaded_bplayer");var B=p.querySelector(".total_bplayer");var u=p.querySelector(".volumeval_bplayer");var j=p.querySelector(".cover_bplayer");var l=p.querySelector("#volumeBtn_bplayer");var w=p.querySelector("#loopBtn_bplayer");var A=p.querySelector("#playBtn_bplayer");var i=p.querySelector("#pauseBtn_bplayer");this.element=k;if(typeof k==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&(this.element.nodeType!==null))){throw new Error("Invalid element.")}if(this.element.bPlayer){throw new Error("bPlayer already attached.")}this.element.bPlayer=true;this.slim=function(C){if(C===true){p.classList.add("slim_bPlayer");t.slim=true;return o}else{if(C===false){p.classList.remove("slim_bPlayer");t.slim=false;return o}else{return t.slim}}};this.src=function(C){if(C){x.src=C;if(!x.autoplay){o.pause()}n.textContent="0:00";B.textContent="0:00";m.style.width=0;r.style.width=0;return o}else{return x.src}};this.cover=function(C){if(C){s.style.backgroundImage='url("'+C+'")';t.cover=C;return o}else{return t.cover}};this.title=function(C){if(C){z.textContent=C;return o}else{return z.textContent}};this.artist=function(C){if(C){h.textContent=C;return o}else{return h.textContent}};this.color=function(C){if(C){m.style.backgroundColor=C;u.style.backgroundColor=C;return o}else{return m.style.backgroundColor}};this.volume=function(C){if(C){x.volume=C;return o}else{return x.volume}};this.muted=function(C){if(C===false){x.muted=C;l.classList.remove("disabled_bplayer");return o}else{if(C===true){x.muted=C;l.classList.add("disabled_bplayer");return o}else{return x.muted}}};this.loop=function(C){if(C===false){x.loop=C;w.classList.add("disabled_bplayer");return o}else{if(C===true){x.loop=C;w.classList.remove("disabled_bplayer");return o}else{return x.loop}}};this.autoplay=function(C){if(C===false){x.autoplay=C;return o}else{if(C===true){x.autoplay=C;return o}else{return x.autoplay}}};this.play=function(){if(this.src()!==""&&this.src()!==null){x.play()}return o};this.pause=function(){x.pause();A.classList.remove("hidden_bplayer");i.classList.add("hidden_bplayer");t.playing=false;return o};this.init=function(){this.element.appendChild(p);f.call(p);this.element.onselectstart=function(){return false};return o};this.playing=function(){return t.playing};Object.defineProperties(this.element,{slim:{get:function(){return o.slim()},set:function(C){o.slim(C)}},src:{get:function(){return o.src()},set:function(C){o.src(C)}},cover:{get:function(){return o.cover()},set:function(C){o.cover(C)}},title:{get:function(){return o.title()},set:function(C){o.title(C)}},artist:{get:function(){return o.artist()},set:function(C){o.artist(C)}},color:{get:function(){return o.color()},set:function(C){o.color(C)}},volume:{get:function(){return o.volume()},set:function(C){o.volume(C)}},muted:{get:function(){return o.muted()},set:function(C){o.muted(C)}},loop:{get:function(){return o.loop()},set:function(C){o.loop(C)}},autoplay:{get:function(){return o.autoplay()},set:function(C){o.autoplay(C)}},playing:{get:function(){return t.playing}}});window.addEventListener("resize",function(){f.call(p)});q.onclick=function(F){var D=this.clientWidth;var C=F.offsetX;try{x.currentTime=C/D*x.duration}catch(E){}};q.onmousedown=function(){t.progressdown=true};q.onmouseup=function(){t.progressdown=false};q.onmouseout=function(){t.progressdown=false};q.onmousemove=function(F){if(t.progressdown){var D=this.clientWidth;var C=F.offsetX;try{x.currentTime=C/D*x.duration}catch(E){}}};v.onclick=function(D){var C=D.offsetX+1;if(C>=0){x.volume=C/80}};v.onmousedown=function(){t.volumedown=true};v.onmouseup=function(){t.volumedown=false};v.onmouseout=function(){t.volumedown=false};v.onmousemove=function(E){if(t.volumedown){var C=E.offsetX+1;try{x.volume=C/80}catch(D){}}};l.onclick=function(){if(o.muted()){o.muted(false)}else{o.muted(true)}};j.onclick=function(){if(t.playing){o.pause()}else{o.play()}};w.onclick=function(){if(o.loop()){o.loop(false)}else{o.loop(true)}};x.ontimeupdate=function(){m.style.width=this.currentTime/this.duration*100+"%";n.textContent=g(this.currentTime)};x.onprogress=function(){try{r.style.width=this.buffered.end(this.length-1)/this.duration*100+"%";B.textContent=g(this.duration)}catch(C){}};x.onvolumechange=function(){u.style.width=this.volume*80+"px"};x.onplay=function(){A.classList.add("hidden_bplayer");i.classList.remove("hidden_bplayer");B.textContent=g(this.duration);t.playing=true};x.onended=function(){if(!o.loop()){o.pause()}};return o}};d.prototype.attach=e;window.bPlayer=d;var b=function(){document.removeEventListener("DOMContentLoaded",b,false);var r=document.querySelectorAll("audio");for(var n=0;n<r.length;n++){if(r[n].hasAttribute("controls")){var q="",l="",s=" ",k="#F00",h=false,j=false,o=false;if(r[n].hasAttribute("title")){q=r[n].getAttribute("title")}if(r[n].hasAttribute("artist")){l=r[n].getAttribute("artist")}if(r[n].hasAttribute("cover")){s=r[n].getAttribute("cover")}if(r[n].hasAttribute("color")){k=r[n].getAttribute("color")}if(r[n].hasAttribute("slim")){if(r[n].getAttribute("slim")!=="false"){h=true}}if(r[n].hasAttribute("autoplay")){if(r[n].getAttribute("autoplay")!=="false"){j=true}}if(r[n].hasAttribute("loop")){if(r[n].getAttribute("loop")!=="false"){o=true}}var p=document.createElement("bplayer");if(r[n].hasAttribute("id")){p.id=r[n].id}if(r[n].hasAttribute("class")){p.className=r[n].className}if(r[n].hasAttribute("style")){p.setAttribute("style",r[n].getAttribute("style"))}c(r[n],p);var m=new d();m.attach(p,r[n]).autoplay(j).loop(o).title(q).artist(l).cover(s).color(k).slim(h).init();if(j){m.play()}}}};document.addEventListener("DOMContentLoaded",b,false);if(document.readyState==="interactive"||document.readyState==="complete"){b()}})();