"use strict";(function(){var c='<div class="info_bplayer"><div class="titlewrap_bplayer"><span class="title_bplayer">Unknown Title</span><span class="author_bplayer">Unknown Artist</span></div><div class="time_bplayer"><span class="current_bplayer">0:00</span><span class="total_bplayer">0:00</span></div><div class="buttons_bplayer"><div class="disabled_bplayer btn_bplayer" id="loopBtn_bplayer"><i class="iconfont_bplayer">&#xe600;</i></div><div class="volume_bplayer"><div class="volumebtn_bplayer btn_bplayer" id="volumeBtn_bplayer"><i class="iconfont_bplayer">&#xe602;</i></div><div class="volumebar_bplayer"><div class="volumebg_bplayer"></div><div class="volumeval_bplayer"></div><div class="volumectl_bplayer"></div></div></div></div></div><div class="cover_bplayer"><div class="coverimg_bplayer"></div><div class="controlbtn_bplayer playBtn_bplayer" id="playBtn_bplayer"><i class="iconfont_bplayer">&#xe601;</i></div><div class="controlbtn_bplayer hidden_bplayer" id="pauseBtn_bplayer"><i class="iconfont_bplayer">&#xe603;</i></div></div><div class="progress_bplayer"><div class="loaded_bplayer"></div><div class="played_bplayer"></div><div class="progressctl_bplayer"></div></div>';var d=function(j){var h=new Date(j*1000);var i=h.getSeconds();if(i<10){i="0"+i}return h.getMinutes()+":"+i};var e=function(h,i){var j=h.parentNode;j.replaceChild(i,h)};var f=function(){if(this.clientWidth<=460){this.classList.add("narrow_bplayer")}else{this.classList.remove("narrow_bplayer")}};var a=function(k){var h=this;if(!k){return h}var w={volumedown:false,progressdown:false,slim:false,cover:""};var i=document.createElement("bplayer");i.className="bPlayer";i.innerHTML=c;var u=i.querySelector(".coverimg_bplayer");var r=i.querySelector(".progressctl_bplayer");var z=i.querySelector(".volumectl_bplayer");var v=i.querySelector(".title_bplayer");var s=i.querySelector(".author_bplayer");var q=i.querySelector(".played_bplayer");var j=i.querySelector(".current_bplayer");var l=i.querySelector(".loaded_bplayer");var x=i.querySelector(".total_bplayer");var A=i.querySelector(".volumeval_bplayer");var p=i.querySelector(".cover_bplayer");var y=i.querySelector("#volumeBtn_bplayer");var m=i.querySelector("#loopBtn_bplayer");var o=i.querySelector("#playBtn_bplayer");var n=i.querySelector("#pauseBtn_bplayer");this.element=i;if(typeof k==="string"){k=document.querySelector(k)}if(!(k&&(k.nodeType!==null))){throw new Error("Invalid element.")}if(k.tagName.toUpperCase()==="BPLAYER"){throw new Error("bPlayer already attached.")}var t;if(k.tagName.toUpperCase()==="AUDIO"){t=k}else{t=document.createElement("audio")}this.slim=function(B){if(B===true){i.classList.add("slim_bPlayer");w.slim=true;return h}else{if(B===false){i.classList.remove("slim_bPlayer");w.slim=false;return h}else{return w.slim}}};this.src=function(B){if(B||B===""){t.src=B;if(!t.autoplay){h.pause()}j.textContent="0:00";x.textContent="0:00";q.style.width=0;l.style.width=0;return h}else{return t.src}};this.cover=function(B){if(B||B===""){u.style.backgroundImage='url("'+B+'")';w.cover=B;return h}else{return w.cover}};this.title=function(B){if(B||B===""){v.textContent=B;return h}else{return v.textContent}};this.artist=function(B){if(B||B===""){s.textContent=B;return h}else{return s.textContent}};this.color=function(B){if(B||B===""){q.style.backgroundColor=B;A.style.backgroundColor=B;return h}else{return q.style.backgroundColor}};this.volume=function(B){if(B||B===""){t.volume=B;return h}else{return t.volume}};this.muted=function(B){if(B===false){t.muted=B;y.classList.remove("disabled_bplayer");return h}else{if(B===true){t.muted=B;y.classList.add("disabled_bplayer");return h}else{return t.muted}}};this.loop=function(B){if(B===false){t.loop=B;m.classList.add("disabled_bplayer");return h}else{if(B===true){t.loop=B;m.classList.remove("disabled_bplayer");return h}else{return t.loop}}};this.autoplay=function(B){if(B===false){t.autoplay=B;return h}else{if(B===true){t.autoplay=B;return h}else{return t.autoplay}}};this.play=function(){if(this.src()!==""&&this.src()!==null){t.play()}return h};this.pause=function(){t.pause();o.classList.remove("hidden_bplayer");n.classList.add("hidden_bplayer");return h};this.init=function(){if(typeof(i.inited)==="undefined"){for(var B=0;B<k.attributes.length;B++){i.setAttribute(k.attributes[B].name,k.attributes[B].value)}e(k,i);f.call(i);i.inited=true}else{console.warn(i,"has already been initialized!")}return h};this.paused=function(){return t.paused};Object.defineProperties(i,{slim:{get:function(){return h.slim()},set:function(B){h.slim(B)}},src:{get:function(){return h.src()},set:function(B){h.src(B)}},cover:{get:function(){return h.cover()},set:function(B){h.cover(B)}},title:{get:function(){return h.title()},set:function(B){h.title(B)}},artist:{get:function(){return h.artist()},set:function(B){h.artist(B)}},color:{get:function(){return h.color()},set:function(B){h.color(B)}},volume:{get:function(){return h.volume()},set:function(B){h.volume(B)}},muted:{get:function(){return h.muted()},set:function(B){h.muted(B)}},loop:{get:function(){return h.loop()},set:function(B){h.loop(B)}},autoplay:{get:function(){return h.autoplay()},set:function(B){h.autoplay(B)}},paused:{get:function(){return t.paused}}});window.addEventListener("resize",function(){f.call(i)});r.addEventListener("click",function(B){var D=this.clientWidth;var E=B.offsetX;try{t.currentTime=E/D*t.duration}catch(C){}});r.addEventListener("mousedown",function(){w.progressdown=true});r.addEventListener("mouseup",function(){w.progressdown=false});r.addEventListener("mouseout",function(){w.progressdown=false});r.addEventListener("mousemove",function(B){if(w.progressdown){var D=this.clientWidth;var E=B.offsetX;try{t.currentTime=E/D*t.duration}catch(C){}}});r.addEventListener("touchstart",function(){w.progressdown=true});r.addEventListener("touchend",function(){w.progressdown=false});r.addEventListener("touchmove",function(B){if(w.progressdown){var D=this.clientWidth;var E=B.touches[0].pageX-B.target.getBoundingClientRect().left;try{t.currentTime=E/D*t.duration}catch(C){}}});z.addEventListener("click",function(B){var C=B.offsetX+1;if(C>=0){t.volume=C/80}});z.addEventListener("mousedown",function(){w.volumedown=true});z.addEventListener("mouseup",function(){w.volumedown=false});z.addEventListener("mouseout",function(){w.volumedown=false});z.addEventListener("mousemove",function(B){if(w.volumedown){var D=B.offsetX+1;try{t.volume=D/80}catch(C){}}});z.addEventListener("touchstart",function(){w.volumedown=true});z.addEventListener("touchend",function(){w.volumedown=false});z.addEventListener("touchmove",function(B){if(w.volumedown){var D=B.touches[0].pageX-B.target.getBoundingClientRect().left+1;try{t.volume=D/80}catch(C){}}});y.addEventListener("click",function(){h.muted(!h.muted())});p.addEventListener("click",function(){if(t.paused){h.play()}else{h.pause()}});m.addEventListener("click",function(){if(h.loop()){h.loop(false)}else{h.loop(true)}});t.addEventListener("timeupdate",function(){q.style.width=this.currentTime/this.duration*100+"%";j.textContent=d(this.currentTime)});t.addEventListener("progress",function(){try{l.style.width=this.buffered.end(this.length-1)/this.duration*100+"%";x.textContent=d(this.duration)}catch(B){}});t.addEventListener("volumechange",function(){A.style.width=this.volume*80+"px"});t.addEventListener("play",function(){o.classList.add("hidden_bplayer");n.classList.remove("hidden_bplayer");x.textContent=d(this.duration)});t.addEventListener("ended",function(){if(!h.loop()){h.pause()}});return h};var b=function(h){if(!h){return('bPlayer - Ver 0.2.0a \n Please use "new" to create a bPlayer element.')}if(typeof(h.element)!=="undefined"){var j={src:"",cover:"",title:"",artist:"",color:"#F00",volume:"1",muted:false,autoplay:false,loop:false,slim:false};for(var k in h){j[k]=h[k]}this.attach(j.element).autoplay(j.autoplay).cover(j.cover).title(j.title).artist(j.artist).color(j.color).volume(j.volume).slim(j.slim).muted(j.muted).loop(j.loop).src(j.src).init();if(j.autoplay){this.play()}}else{throw new Error("[bPlayer] 'element' is not defined in configuration!")}};b.prototype.attach=a;window.bPlayer=b;var g=function(){document.removeEventListener("DOMContentLoaded",g,false);var j=document.querySelectorAll("audio");for(var n=0;n<j.length;n++){if(j[n].hasAttribute("controls")){var r="",h="",m="",l="#F00",q=false,k=false,o=false;if(j[n].hasAttribute("title")){r=j[n].getAttribute("title")}if(j[n].hasAttribute("artist")){h=j[n].getAttribute("artist")}if(j[n].hasAttribute("cover")){m=j[n].getAttribute("cover")}if(j[n].hasAttribute("color")){l=j[n].getAttribute("color")}if(j[n].hasAttribute("slim")){if(j[n].getAttribute("slim")!=="false"){q=true}}if(j[n].hasAttribute("autoplay")){if(j[n].getAttribute("autoplay")!=="false"){k=true}}if(j[n].hasAttribute("loop")){if(j[n].getAttribute("loop")!=="false"){o=true}}var p=new b();p.attach(j[n]).autoplay(k).loop(o).title(r).artist(h).cover(m).color(l).slim(q).init();if(k){p.play()}}}};document.addEventListener("DOMContentLoaded",g,false);if(document.readyState==="interactive"||document.readyState==="complete"){g()}})();